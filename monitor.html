<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIGITAL WELL-BEING: Digital Self-Portrait</title>
    <link rel="stylesheet" href="css/monitor.css">
</head>
<body>
    <div class="background-container">
        <video id="background-video" loop autoplay muted playsinline>
            <source src="images/background.mp4" type="video/mp4">
        </video>
        <div class="noise-overlay" id="noise-overlay"></div>
    </div>

    <div class="container">
        <header>
            <h1>DIGITAL WELL-BEING</h1>
            <p>Digital Self-Portrait ECG Monitor</p>
            <a href="index.html" class="back-button">← BACK</a>
        </header>

        <div class="monitor-container">
            <div class="monitor-header">
                <span class="monitor-title">Digital Vital Signs Monitor</span>
                <span class="status" id="status-text">CLARITY MODE - Clean Drive Pulse</span>
            </div>
            <div class="canvas-container">
                <canvas id="ecgCanvas"></canvas>
                <div class="grid-overlay"></div>
            </div>
        </div>

        <div class="controls-container">
            <div class="slider-container">
                <div class="slider-label">
                    <span>Clarity ↔ Chaos Spectrum</span>
                    <span id="chaos-level">0%</span>
                </div>
                <input type="range" id="chaosSlider" min="0" max="100" value="0" class="slider">
            </div>
        </div>

        <div class="stats-container">
            <div class="stat-box drive">
                <p class="stat-label">Drive Activities</p>
                <p class="stat-value">37</p>
            </div>
            <div class="stat-box gmail">
                <p class="stat-label">Gmail Searches</p>
                <p class="stat-value">63</p>
            </div>
            <div class="stat-box search">
                <p class="stat-label">Search Glitches</p>
                <p class="stat-value">1</p>
            </div>
            <div class="stat-box total">
                <p class="stat-label">Total Activities</p>
                <p class="stat-value">101</p>
            </div>
        </div>

        <div class="info-panel">
            <p><strong>PATIENT:</strong> Digital Self</p>
            <p><strong>MONITORING PERIOD:</strong> Mar 2024 - Sep 2025</p>
            <p><strong>STATUS:</strong> <span class="blink">ACTIVE PRODUCTIVITY DETECTED</span></p>
            <p class="concept">
                <strong>CONCEPT:</strong> Our digital life exists on a spectrum from clarity to chaos. 
                Drive activities form our productive heartbeat, while Gmail searches add noise layers 
                and search data creates glitches. Move the slider to experience how overwhelming 
                all our data actually is.
            </p>
        </div>

        <div class="sound-control">
            <button id="playHeartbeat" class="heartbeat-button">Play Heartbeat</button>
        </div>
    </div>

    <!-- Add heartbeat sound -->
    <audio id="heartbeatAudio" preload="auto">
        <source src="audio/heartbeat.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script src="js/ecg-data.js"></script>
    <script src="js/monitor.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get the audio element and button
            const heartbeatAudio = document.getElementById('heartbeatAudio');
            const playButton = document.getElementById('playHeartbeat');
            
            // Make sure the audio is loaded
            heartbeatAudio.load();
            
            // Set volume (0.0 to 1.0)
            heartbeatAudio.volume = 0.5;
            
            // Add click event to play button
            playButton.addEventListener('click', function() {
                console.log("Button clicked");
                if (heartbeatAudio.paused) {
                    // Try to play the audio
                    const playPromise = heartbeatAudio.play();
                    
                    // Handle play promise
                    if (playPromise !== undefined) {
                        playPromise.then(_ => {
                            // Playback started successfully
                            console.log("Audio playing");
                            playButton.textContent = "Pause Heartbeat";
                            playButton.classList.add('playing');
                        })
                        .catch(error => {
                            // Auto-play was prevented
                            console.log("Audio play failed: " + error);
                            // Try again with user interaction
                            playButton.addEventListener('click', function() {
                                heartbeatAudio.play();
                            }, { once: true });
                        });
                    }
                } else {
                    // Pause the audio
                    heartbeatAudio.pause();
                    console.log("Audio paused");
                    playButton.textContent = "Play Heartbeat";
                    playButton.classList.remove('playing');
                }
            });
            
            // Debug info
            console.log("Audio element found:", heartbeatAudio !== null);
            console.log("Button element found:", playButton !== null);
            console.log("Audio source:", heartbeatAudio.querySelector('source').src);
        });
    </script>
    
    <style>
        /* Additional styling for the heartbeat button */
        .heartbeat-button {
            background-color: #00FF41;
            color: black;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: monospace;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }
        
        .heartbeat-button:hover {
            background-color: #00CC33;
            transform: scale(1.05);
        }
        
        .heartbeat-button.playing {
            background-color: #FF6B6B;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .sound-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</body>
</html>


